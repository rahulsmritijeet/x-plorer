<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X-PLORER</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Michroma:wght@400&family=Exo+2:wght@300;400;500;600;700&family=Aldrich&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css" />
    <link rel="icon" href="assets/interstellar.png" type="image/png">
</head>

<body>
    <header>
        <nav>
            <div class="logo">X-PLORER</div>

            <ul class="nav-center">
                <li><a href="#" data-page="launchpad">LAUNCHPAD</a></li>
                <li><a href="#" data-page="spacecrafts">SPACECRAFTS</a></li>
                <li><a href="#" data-page="destinations">DESTINATIONS</a></li>
                <li><a href="#" data-page="experiences">EXPERIENCES</a></li>
            </ul>

            <a href="#" class="contact-btn main-nav-contact-btn" data-page="contact">CONTACT</a>

            <div class="hamburger" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>

            <div class="mobile-menu" id="mobileMenu">
                <ul>
                    <li><a href="#" data-page="launchpad" onclick="closeMenu()">LAUNCHPAD</a></li>
                    <li><a href="#" data-page="spacecrafts" onclick="closeMenu()">SPACECRAFTS</a></li>
                    <li><a href="#" data-page="destinations" onclick="closeMenu()">DESTINATIONS</a></li>
                    <li><a href="#" data-page="experiences" onclick="closeMenu()">EXPERIENCES</a></li>
                </ul>
                <a href="#" class="contact-btn mobile-menu-contact-btn" data-page="contact" onclick="closeMenu()">CONTACT</a>
            </div>
        </nav>
    </header>

    <div id="content-wrapper" style="flex-grow: 1;">
        <iframe id="pageFrame" src="" style="width: 100%; height: 100%; border: none;"></iframe>
    </div>

    <script>
        const iframe = document.getElementById('pageFrame');
        const navLinks = document.querySelectorAll('.nav-center a, .mobile-menu a, .main-nav-contact-btn, .mobile-menu-contact-btn');
        const header = document.querySelector('header');

        let currentActiveNavElement = null;

        const updateIframeHeight = () => {
            const headerHeight = header.offsetHeight;
            iframe.style.height = `calc(100vh - ${headerHeight}px)`;
        };

        function toggleMenu() {
            document.getElementById('mobileMenu').classList.toggle('active');
            document.querySelector('.hamburger').classList.toggle('active');
        }

        function closeMenu() {
            document.getElementById('mobileMenu').classList.remove('active');
            document.querySelector('.hamburger').classList.remove('active');
        }

        navLinks.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const page = e.target.dataset.page;

                if (currentActiveNavElement) {
                    if (currentActiveNavElement.classList.contains('contact-btn')) {
                        document.querySelector('.main-nav-contact-btn')?.classList.remove('active');
                        document.querySelector('.mobile-menu-contact-btn')?.classList.remove('active');
                    } else {
                        document.querySelectorAll(`[data-page="${currentActiveNavElement.dataset.page}"]`).forEach(elem => elem.classList.remove('active'));
                    }
                }

                let newActiveElements;
                if (page === 'contact') {
                    document.querySelector('.main-nav-contact-btn')?.classList.add('active');
                    document.querySelector('.mobile-menu-contact-btn')?.classList.add('active');
                    newActiveElements = document.querySelectorAll(`[data-page="contact"]`);
                } else {
                    newActiveElements = document.querySelectorAll(`[data-page="${page}"]`);
                    newActiveElements.forEach(elem => elem.classList.add('active'));
                }

                currentActiveNavElement = newActiveElements.length > 0 ? newActiveElements[0] : null;

                let pageUrl;
                switch (page) {
                    case 'spacecrafts':
                        pageUrl = 'spacecrafts/spacecrafts.html';
                        break;
                    case 'launchpad':
                        pageUrl = 'launchpad/launchpad.html';
                        break;
                    case 'destinations':
                        pageUrl = 'destinations/destinations.html';
                        break;
                    case 'experiences':
                        pageUrl = 'experiences/experiences.html';
                        break;
                    case 'contact':
                        pageUrl = 'stellaris/stellaris.html';
                        break;
                    default:
                        console.error('Unknown page requested:', page);
                        pageUrl = 'default_error_page.html';
                }
                iframe.src = pageUrl;

                closeMenu();
            });
        });

        document.addEventListener('click', function (event) {
            const hamburger = document.querySelector('.hamburger');
            const mobileMenu = document.getElementById('mobileMenu');

            if (hamburger && mobileMenu && !hamburger.contains(event.target) && !mobileMenu.contains(event.target)) {
                closeMenu();
            }
        });

        window.addEventListener('load', () => {
            updateIframeHeight();

            const initialPage = 'spacecrafts';
            const initialActiveLink = document.querySelector(`.nav-center a[data-page="${initialPage}"]`);
            if (initialActiveLink) {
                initialActiveLink.classList.add('active');
                currentActiveNavElement = initialActiveLink;
            }

            let initialPageUrl;
            switch (initialPage) {
                case 'spacecrafts':
                    initialPageUrl = 'spacecrafts/spacecrafts.html';
                    break;
                case 'launchpad':
                    initialPageUrl = 'launchpad/launchpad.html';
                    break;
                case 'destinations':
                    initialPageUrl = 'destinations/destinations.html';
                    break;
                case 'experiences':
                    initialPageUrl = 'experiences/experiences.html';
                    break;
                case 'contact':
                    initialPageUrl = 'stellaris/stellaris.html';
                    break;
            }
            if (initialPageUrl) {
                iframe.src = initialPageUrl;
            }
        });
    </script>
</body>

</html>
